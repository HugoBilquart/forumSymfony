{% extends 'base.html.twig' %}

{% block title %}IT Solutions - Memberlist{% endblock %}

{% block body %}

<!-- Breadcrumb -->
<div class="col-sm-12" id="breadcrumb">
    <a href="{{ path('home') }}"><span>Home</span></a>
    >
    <span>Users</span>
</div>
<!-- END Breadcrumb -->

<div class="col-xl-12">
    <h1 class="page-name">List of Members</h1>
</div>

<div class="col-xl-12">
    <span>Access profile of a user by clicking on a line</span>
</div>

<div class="col-xl-12 table-responsive-xl text-nowrap">
    <table class="table table-dark table-striped table-memberlist" id="users">
        <thead>
            <tr>
                <th scope="col"><a href="" title="Order by ID" class="filterLink">#</a></th>
                <th scope="col"><a href="" title="Order by name" class="filterLink">Name</a></th>
                <th scope="col"><a href="" title="Order by role" class="filterLink">Role</a></th>
                <th scope="col">Profile Picture</th>
                <th scope="col">Registration Date</th>
                <th scope="col">Last time online</th>
            </tr>
        </head>
        <tbody>
            {% for user in users %}
                <tr data-id="{{ user.id }}" tabindex="0">
                    <th scope="row">{{ user.id }}</th>
                    <td>{{ user.username }}</td>
                    <td>
                        <p class="{{ user.roleStr(user.roles|last) }}-role">
                            {{ user.roleStr(user.roles|last) }}
                        </p>
                    </td>
                    <td>
                        <img src="img/users/{{ user.username }}.png" alt="{{ user.username }}'s profile picture" class="memberlist-picture">
                    </td>
                    <td>
                        {{ user.registrationDate | date('d/m/Y') }}
                    </td>
                    <td>
                        {% if user == app.user %}
                            <p class="online">Currently online</p>
                        {% elseif user.lastLogin is null %}
                            <p class="failed">Never</p>
                        {% else %}
                            {{ user.getLastLoginStr(user.lastLogin) }}
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script>
    $('#users > tbody > tr').click(function() {
        window.location.href = "/user/" + $(this).data("id");
	});
</script>
{% endblock %}
